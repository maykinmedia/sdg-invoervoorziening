{% extends 'organisaties/base.html' %}

{% load static %}
{% load i18n %}
{% load utils %}

{% block container_subtitle %}Wijzig contactgegevens{% endblock container_subtitle %}
{% block container_title %}SDG voor de
    <b>{{ lokaleoverheid.organisatie.owms_pref_label }}</b>{% endblock container_title %}

{% block inner %}
    <form action="{% url "organisaties:overheid_edit" pk=lokaleoverheid.pk %}" method="post" class="form">
        {% csrf_token %}

        <div class="form__forms">
            {% field form.ondersteunings_organisatie %}
            {% field form.verantwoordelijke_organisatie %}
            {% field form.bevoegde_organisatie %}
            {% field form.organisatie %}
            {% field form.lau_code %}
            {% field form.contact_naam %}
            {% field form.contact_website %}
            {% field form.contact_telefoonnummer %}
            {% field form.contact_emailadres %}
        </div>

        <div class="form__subforms formset">
            <div>
                {{ formset.management_form }}
            </div>
            <div class="formset__body">
                <div class="form__subforms">
                    {% for subform in formset %}
                        {% for hidden in subform.hidden_fields %}
                            {{ hidden }}
                        {% endfor %}
                        <div class="form__block-group">
                            <div>
                                <div class="form__table-header-left">Lokatie</div>
                                {% field subform.naam %}
                                {% field subform.straat %}
                                {% field subform.nummer %}
                                {% field subform.plaats %}
                                <div class="form__table form__special-group">
                                    {% field subform.postcode %}
                                    {% field subform.land %}
                                </div>
                            </div>
                            <div class="form__table">
                                <div class="form__table-header">Dag</div>
                                <div class="form__table-header">Openingstijden</div>
                                {% table_grid_field subform.maandag %}
                                {% table_grid_field subform.dinsdag %}
                                {% table_grid_field subform.woensdag %}
                                {% table_grid_field subform.donderdag %}
                                {% table_grid_field subform.vrijdag %}
                                {% table_grid_field subform.zaterdag %}
                                {% table_grid_field subform.zondag %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="formset__add form__add-subform" data-formset-prefix="{{ lokatie_formset.prefix }}">
            <i class="fas fa-plus"></i>
            {% trans "Add another location" %}
        </div>
        <input type="submit" value="Opslaan" class="primaryAction login_button button">
    </form>

    <template class="formset__template">
        {% include "organisaties/_prefix/lokatie_formset.html" %}
    </template>

    <div class="form__actions">
        <p class="form__action-help">Wijzigingen worden direct gepubliceerd</p>
    </div>
{% endblock inner %}

{% block extra_js %}
    <script src="{% static 'formset.js' %}"></script>
    <script>
        new Formset();
    </script>
{% endblock %}
